-- --------------------------------------------------------
-- 主機:                           192.168.1.32
-- 伺服器版本:                        8.0.29 - MySQL Community Server - GPL
-- 伺服器作業系統:                      Linux
-- HeidiSQL 版本:                  11.2.0.6213
-- --------------------------------------------------------

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET NAMES utf8 */;
/*!50503 SET NAMES utf8mb4 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

-- 傾印  資料表 im.t_message 結構
CREATE TABLE IF NOT EXISTS `t_message` (
  `id` bigint NOT NULL AUTO_INCREMENT COMMENT '讯息流水号',
  `_mid` bigint DEFAULT NULL COMMENT 'IM信息流水号',
  `_sender_id` bigint NOT NULL COMMENT '发送者id',
  `_sender_account_name` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL COMMENT '发送者帐号',
  `_sender_role` int NOT NULL COMMENT '发送者角色 1: 系统管理者, 2: 会员',
  `_receiver_id` bigint NOT NULL COMMENT '接收者id',
  `_receiver_account_name` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL COMMENT '接收者帐号/群组gid',
  `_message_type` tinyint NOT NULL COMMENT '消息类型 1:文本, 2: 语音, 3: 图片, 4: 文件, 5: 视频, 6: 建群, 7: 群加人, 8: 其它',
  `_chat_type` tinyint NOT NULL COMMENT '会话类型 1: 单聊, 2: 群组, 3: 聊天室, 4: 频道',
  `_content` text COMMENT '内容',
  `_data` longblob COMMENT 'IM信息',
  `_file_path` varchar(500) DEFAULT NULL COMMENT '档案路径',
  `_reverted` tinyint NOT NULL DEFAULT '0' COMMENT '撤回 0:否 1:是',
  `_deleted` tinyint NOT NULL DEFAULT '0' COMMENT '删除 0: 否 1: 删除',
  `_create_time` datetime DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  `_memo` varchar(500) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL COMMENT '备注',
  PRIMARY KEY (`id`),
  UNIQUE KEY `uniqueue` (`_mid`) USING BTREE,
  KEY `ix_001` (`_sender_id`,`_receiver_id`) USING BTREE,
  KEY `ix_002` (`_sender_id`,`_sender_account_name`,`_sender_role`) USING BTREE,
  KEY `ix_003` (`_receiver_id`,`_receiver_account_name`,`_chat_type`) USING BTREE,
  KEY `ix_004` (`_sender_id`,`_receiver_id`) USING BTREE
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='聊天讯息';

-- 正在傾印表格  im.t_message 的資料：~0 rows (近似值)
/*!40000 ALTER TABLE `t_message` DISABLE KEYS */;
INSERT INTO `t_message` (`id`, `_mid`, `_sender_id`, `_sender_account_name`, `_sender_role`, `_receiver_id`, `_receiver_account_name`, `_message_type`, `_chat_type`, `_content`, `_data`, `_file_path`, `_reverted`, `_deleted`, `_create_time`, `_memo`) VALUES
	(1, 331707385731121153, 2, 'ronron', 2, 1, 'qygqmws2k', 8, 2, '', _binary 0x7B2273656172636861626C65436F6E74656E74223A22222C22636F6E74656E74223A22222C226578747261223A22222C2264617461223A225A586C4B626B6C7162326C6A57477875593163784D324E36536E4A4A61586470596E6C4A4E6B6C745A4456614D305A305A444E4E6557463553584E4A6254527054326C4D6257645A646D35705445687361316C79626D31694D3235705757647054454E4B64456C7162326C4A626A4139222C226D6564696154797065223A6E756C6C2C2272656D6F74654D6564696155726C223A6E756C6C7D, '', 0, 0, '2023-01-05 16:13:27', '创建组'),
	(2, 331707596792692737, 0, '{无法识别}', 2, 14, 'B3362346430363365', 1, 1, '欢迎您的归来', _binary 0x7B2273656172636861626C65436F6E74656E74223A22E6ACA2E8BF8EE682A8E79A84E5BD92E69DA5222C22636F6E74656E74223A22222C226578747261223A22222C2264617461223A6E756C6C2C226D6564696154797065223A6E756C6C2C2272656D6F74654D6564696155726C223A6E756C6C7D, '', 0, 0, '2023-01-05 16:15:08', '文本'),
	(3, 331707853517651969, 3, 'ronron', 1, 1, 'qygqmws2k', 1, 2, '您好，恋爱告白版欢迎您来到火热的聊天频道，喜欢妹妹任您挑选，邀请码【000000】', _binary 0x7B2273656172636861626C65436F6E74656E74223A22E682A8E5A5BDEFBC8CE6818BE788B1E5918AE799BDE78988E6ACA2E8BF8EE682A8E69DA5E588B0E781ABE783ADE79A84E8818AE5A4A9E9A291E98193EFBC8CE5969CE6ACA2E5A6B9E5A6B9E4BBBBE682A8E68C91E98089EFBC8CE98280E8AFB7E7A081E38090303030303030E38091222C22636F6E74656E74223A22222C226578747261223A227B5C2266696C6555726C5C223A6E756C6C2C5C2273656E646572526F6C655C223A312C5C2267726F7570547970655C223A327D222C2264617461223A6E756C6C2C226D6564696154797065223A6E756C6C2C2272656D6F74654D6564696155726C223A6E756C6C7D, '', 0, 0, '2023-01-05 16:17:10', '文本');
/*!40000 ALTER TABLE `t_message` ENABLE KEYS */;

/*!40101 SET SQL_MODE=IFNULL(@OLD_SQL_MODE, '') */;
/*!40014 SET FOREIGN_KEY_CHECKS=IFNULL(@OLD_FOREIGN_KEY_CHECKS, 1) */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40111 SET SQL_NOTES=IFNULL(@OLD_SQL_NOTES, 1) */;
